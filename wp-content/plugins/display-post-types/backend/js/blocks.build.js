(()=>{"use strict";var e=wp.components.CheckboxControl;const t=function(t){var n=t.listItems,l=t.selected,a=t.onItemChange,s=t.label;return wp.element.createElement("div",{className:"components-base-control"},wp.element.createElement("label",{class:"components-base-control__label"},s),wp.element.createElement("ul",{className:"multibox__checklist"},n.map((function(t){return wp.element.createElement("li",{key:t.value,className:"multibox__checklist-item"},wp.element.createElement(e,{label:t.label,checked:l.includes(t.value),onChange:function(){a(t.value)}}))}))))};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=wp.i18n.__,u=wp.element,y=u.Component,m=u.Fragment,d=u.createRef,f=wp.editor.InspectorControls,h=wp.apiFetch,b=wp.components,v=b.PanelBody,g=b.TextControl,w=b.SelectControl,C=b.RangeControl,x=b.ToggleControl,E=b.ServerSideRender;const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(S,e);var n,a,u,y,b=(u=S,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(u);if(y){var n=r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return i(this,e)});function S(){var e;return s(this,S),(e=b.apply(this,arguments)).state={postTypes:[],pageList:[],taxonomies:[],termsList:[],styleList:[]},e.fetching=!1,e.styleSupport={},e.elemRef=d(),e}return n=S,(a=[{key:"apiDataFetch",value:function(e,t){var n=this;if(this.fetching)setTimeout(this.apiDataFetch.bind(this,e,t),200);else{var l={};this.fetching=!0,h({path:"/dpt/v1/"+t}).then((function(t){var a=Object.keys(t);a=a.map((function(e){return{label:t[e],value:e}})),l[e]=a,n.setState(l),n.fetching=!1})).catch((function(){l[e]=[],n.setState(l),n.fetching=!1}))}}},{key:"componentDidMount",value:function(){var e=this.props.attributes.postType;this.apiDataFetch("postTypes","posttypes"),e&&("page"===e?this.getPagesList():(this.updateTaxonomy(),this.updateTerms())),this.getStyleList()}},{key:"componentDidUpdate",value:function(e){var t=e.attributes,n=t.postType,l=t.taxonomy,a=this.props.attributes,s=a.postType,o=a.taxonomy;n!==s&&(this.updateTaxonomy(),"page"===s&&this.getPagesList()),l!==o&&this.updateTerms()}},{key:"updateTaxonomy",value:function(){var e=this.props.attributes.postType;e&&"page"!==e?this.apiDataFetch("taxonomies","taxonomies/"+e):this.setState({taxonomies:[],termsList:[]})}},{key:"updateTerms",value:function(){var e=this.props.attributes.taxonomy;e?this.apiDataFetch("termsList","terms/"+e):this.setState({termsList:[]})}},{key:"getPagesList",value:function(){this.apiDataFetch("pageList","pagelist")}},{key:"getStyleList",value:function(){var e=this;h({path:"/dpt/v1/stylelist"}).then((function(t){var n=Object.keys(t),l=n.map((function(e){return{label:t[e].label,value:e}}));n.forEach((function(n){e.styleSupport[n]=t[n].support})),e.setState({styleList:l})})).catch((function(){e.setState({styleList:[]})}))}},{key:"render",value:function(){var e,n,a,s=this,o=this.state,p=o.postTypes,i=o.taxonomies,r=o.pageList,u=o.termsList,y=o.styleList,d=this.props,h=d.attributes,b=d.setAttributes,S=h.postType,T=h.taxonomy,A=h.terms,L=h.relation,O=h.postIds,k=h.pages,P=h.number,I=h.orderBy,R=h.order,D=h.styles,_=h.styleSup,M=h.imageCrop,j=h.imgAspect,z=h.imgAlign,N=h.brRadius,B=h.colNarr,F=h.plHolder,G=h.showPgnation,H=h.textAlign,q=h.vGutter,U=h.hGutter,V=h.eLength,W=h.eTeaser,$=h.offset,J=h.autoTime,K=function(e,t){var n=s.styleSupport[e];return void 0!==n&&n.includes(t)},Q=[{value:"date",label:c("Publish Date","display-post-types")},{value:"modified",label:c("Modified Date","display-post-types")},{value:"title",label:c("Title","display-post-types")},{value:"author",label:c("Author","display-post-types")},{value:"comment_count",label:c("Comment Count","display-post-types")},{value:"rand",label:c("Random","display-post-types")}],X=[{value:"",label:c("No Cropping","display-post-types")},{value:"land1",label:c("Landscape (4:3)","display-post-types")},{value:"land2",label:c("Landscape (3:2)","display-post-types")},{value:"port1",label:c("Portrait (3:4)","display-post-types")},{value:"port2",label:c("Portrait (2:3)","display-post-types")},{value:"wdscrn",label:c("Widescreen (16:9)","display-post-types")},{value:"squr",label:c("Square (1:1)","display-post-types")}],Y=[{value:"topleftcrop",label:c("Top Left Cropping","display-post-types")},{value:"topcentercrop",label:c("Top Center Cropping","display-post-types")},{value:"centercrop",label:c("Center Cropping","display-post-types")},{value:"bottomcentercrop",label:c("Bottom Center Cropping","display-post-types")},{value:"bottomleftcrop",label:c("Bottom Left Cropping","display-post-types")}];return wp.element.createElement(m,null,wp.element.createElement(f,null,wp.element.createElement(v,{title:c("Setup Display Post Types","display-post-types")},p&&wp.element.createElement(w,{label:c("Select Post Type","display-post-types"),value:S,options:p,onChange:function(e){return function(e){b({terms:[]}),b({taxonomy:""}),b({postType:e})}(e)}})),wp.element.createElement(v,{initialOpen:!1,title:c("Get items to be displayed","display-post-types")},S&&"page"!==S&&wp.element.createElement(g,{label:c("Get items by Post IDs (optional)","display-post-types"),value:O,onChange:function(e){return b({postIds:e})},help:c("Comma separated ids, i.e. 230,300","display-post-types")}),S&&!!i.length&&wp.element.createElement(w,{label:c("Get items by Taxonomy","display-post-types"),value:T,options:i,onChange:function(e){return function(e){b({terms:[]}),b({taxonomy:e})}(e)}}),S&&"page"===S&&!!r.length&&wp.element.createElement(t,{listItems:r,selected:k,onItemChange:function(e){var t=k.indexOf(e);b(-1===t?{pages:[].concat(l(k),[e])}:{pages:k.filter((function(t){return t!==e}))})},label:c("Select Pages","display-post-types")}),!!u.length&&wp.element.createElement(t,{listItems:u,selected:A,onItemChange:function(e){var t=A.indexOf(e);b(-1===t?{terms:[].concat(l(A),[e])}:{terms:A.filter((function(t){return t!==e}))})},label:c("Select Taxonomy Terms","display-post-types")}),!!u.length&&wp.element.createElement(w,{label:c("Terms Relationship","display-post-types"),value:L,onChange:function(e){return b({relation:e})},options:[{value:"IN",label:c("Show posts belong to any of the terms checked above.","display-post-types")},{value:"AND",label:c("Show posts only if belong to all of the terms checked above","display-post-types")}]}),S&&"page"!==S&&wp.element.createElement(C,{label:c("Number of items to display","display-post-types"),value:P,onChange:function(e){return b({number:e})},min:1}),S&&"page"!==S&&wp.element.createElement(C,{label:c("Offset (number of posts to displace)","display-post-types"),value:$,onChange:function(e){return b({offset:e})},min:0}),S&&D&&!K(D,"slider")&&wp.element.createElement(x,{label:c("Show Pagination.","display-post-types"),checked:!!G,onChange:function(e){return b({showPgnation:e})}}),S&&"page"!==S&&wp.element.createElement(w,{label:c("Order By","display-post-types"),value:I,onChange:function(e){return b({orderBy:e})},options:Q}),S&&"page"!==S&&wp.element.createElement(w,{label:c("Sort Order","display-post-types"),value:R,onChange:function(e){return b({order:e})},options:[{value:"DESC",label:c("Descending","display-post-types")},{value:"ASC",label:c("Ascending","display-post-types")}]})),wp.element.createElement(v,{initialOpen:!1,title:c("Styling selected items","display-post-types")},S&&!!y.length&&wp.element.createElement(w,{label:c("Display Style","display-post-types"),value:D,onChange:function(e){return b({styles:e})},options:y}),S&&!!y.length&&wp.element.createElement(t,{listItems:(e=D,n=[{value:"thumbnail",label:c("Thumbnail","display-post-types")},{value:"title",label:c("Title","display-post-types")},{value:"meta",label:c("Meta Info","display-post-types")},{value:"category",label:c("Category","display-post-types")},{value:"excerpt",label:c("Excerpt","display-post-types")},{value:"date",label:c("Date","display-post-types")},{value:"ago",label:c("Ago","display-post-types")},{value:"author",label:c("Author","display-post-types")},{value:"content",label:c("Content","display-post-types")}],a=s.styleSupport[e],void 0!==a&&n.filter((function(e){return"category"!==e.value?a.includes(e.value):a.includes(e.value)&&"post"===S}))),selected:_,onItemChange:function(e){var t=_.indexOf(e);b(-1===t?{styleSup:[].concat(l(_),[e])}:{styleSup:_.filter((function(t){return t!==e}))})},label:c("Items supported by display style","display-post-types")}),S&&_.includes("excerpt")&&K(D,"excerpt")&&wp.element.createElement(C,{label:c("Excerpt Length (in words)","display-post-types"),value:V,onChange:function(e){return b({eLength:e})},min:0}),S&&_.includes("excerpt")&&K(D,"excerpt")&&wp.element.createElement(g,{label:c("Excerpt Teaser Text","display-post-types"),value:W,onChange:function(e){return b({eTeaser:e})},help:c("i.e., Continue Reading, Read More","display-post-types")}),S&&D&&K(D,"multicol")&&wp.element.createElement(C,{label:c("Maximum grid columns (Responsive)","display-post-types"),value:B,onChange:function(e){return b({colNarr:e})},min:1,max:8}),S&&D&&K(D,"slider")&&wp.element.createElement(C,{label:c("Auto slide timer (delay in ms)","display-post-types"),value:J,onChange:function(e){return b({autoTime:e})},min:0,max:1e4,step:500}),S&&wp.element.createElement(w,{label:c("Image Cropping","display-post-types"),value:j,onChange:function(e){return b({imgAspect:e})},options:X}),S&&""!==j&&wp.element.createElement(w,{label:c("Image Cropping Position","display-post-types"),value:M,onChange:function(e){return b({imageCrop:e})},options:Y}),S&&D&&K(D,"ialign")&&wp.element.createElement(w,{label:c("Image Alignment","display-post-types"),value:z,onChange:function(e){return b({imgAlign:e})},options:[{value:"",label:c("Left Aligned","display-post-types")},{value:"right",label:c("Right Aligned","display-post-types")}]})),wp.element.createElement(v,{initialOpen:!1,title:c("Additional Styling Options","display-post-types")},S&&wp.element.createElement(w,{label:c("Text Align","display-post-types"),value:H,onChange:function(e){return b({textAlign:e})},options:[{value:"",label:c("Left Align","display-post-types")},{value:"r-text",label:c("Right Align","display-post-types")},{value:"c-text",label:c("Center Align","display-post-types")}]}),S&&wp.element.createElement(C,{label:c("Horizontal Gutter (in px)","display-post-types"),value:U,onChange:function(e){return b({hGutter:e})},min:0,max:100}),S&&wp.element.createElement(C,{label:c("Vertical Gutter (in px)","display-post-types"),value:q,onChange:function(e){return b({vGutter:e})},min:0,max:100}),S&&wp.element.createElement(C,{label:c("Border Radius (in px)","display-post-types"),value:N,onChange:function(e){return b({brRadius:e})},min:0,max:100}),S&&wp.element.createElement(x,{label:c("Thumbnail Placeholder","display-post-types"),checked:!!F,onChange:function(e){return b({plHolder:e})}}))),wp.element.createElement("div",{className:"dpt-container",ref:this.elemRef},wp.element.createElement(E,{block:"dpt/display-post-types",attributes:this.props.attributes})))}}])&&o(n.prototype,a),S}(y);var T=wp.i18n.__;(0,wp.blocks.registerBlockType)("dpt/display-post-types",{title:T("Display Post Types","display-post-types"),description:T("Filter and display any pages, posts or post types.","display-post-types"),icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},wp.element.createElement("path",{d:"M9.143 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM9.143 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM9.143 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 22.286v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM20.571 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 13.143v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714zM32 4v3.429c0 0.946-0.768 1.714-1.714 1.714h-5.714c-0.946 0-1.714-0.768-1.714-1.714v-3.429c0-0.946 0.768-1.714 1.714-1.714h5.714c0.946 0 1.714 0.768 1.714 1.714z"})),category:"layout",keywords:[T("display posts","display-post-types"),T("post types","display-post-types")],edit:S,save:function(){return null}})})();